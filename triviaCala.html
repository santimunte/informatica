<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Trivia de San José de Calasanz</title>
<style>
/* 2. CÓDIGO CSS (en el head) */
.modal {
display: none; /* oculto hasta abrir */
position: fixed;
left: 0; top: 0;
width: 100%; height: 100%;
background-color: rgba(110, 79, 79, 0.5);
z-index: 1000;
overflow-y: auto; /* Para asegurar que el modal es usable en pantallas pequeñas */
}
.modal-contenido {
 background: rgb(2, 58, 241);
margin: 5% auto;
padding: 20px;
border-radius: 10px;
max-width: 600px;
max-height: 90vh;
overflow-y: auto;
}
.cerrar { 
float: right; 
cursor: pointer; 
font-size: 24px; 
font-weight: bold; /* Añadido para mejor visibilidad */
}
/* 5. Retroalimentación (CSS) */
.correcta { color: rgb(240, 0, 0); font-weight: bold; }
.incorrecta { color: rgb(0, 217, 255); font-weight: bold; }
#resultado { margin-top: 1em; padding-top: 1em; border-top: 1px solid #eee; }

button {
padding: 10px 20px;
background-color: #ffbb00;
color: white;
border: none;
border-radius: 5px;
cursor: pointer;
margin-top: 10px;
}
button:hover {
background-color: #0056b3;
}
</style>
</head>
<body>
<section id="jugar-trivia">
<h2>¿Te animas a poner a prueba tus conocimientos?</h2>
<button id="abrirTrivia">Comenzar Trivia</button>
</section>
<div id="modalTrivia" class="modal">
<div class="modal-contenido">
<span class="cerrar">&times;</span>
<h2>Trivia sobre San José de Calasanz</h2>
<form id="formTrivia">
<p><strong>1.</strong> ¿Dónde nació San José de Calasanz?</p>
<label><input type="radio" name="p1" value="Madrid"> Madrid</label><br>
<label><input type="radio" name="p1" value="Peralta de la Sal"> Peralta de la Sal</label><br>
<label><input type="radio" name="p1" value="Roma"> Roma</label><br><br>
<p><strong>2.</strong> ¿En qué año nació?</p>
<label><input type="radio" name="p2" value="1556"> 1556</label><br>
<label><input type="radio" name="p2" value="1656"> 1656</label><br>
<label><input type="radio" name="p2" value="1756"> 1756</label><br><br>
<p><strong>3.</strong> ¿Dónde fundó la primera escuela gratuita?</p>
<label><input type="radio" name="p3" value="Zaragoza"> Zaragoza</label><br>
<label><input type="radio" name="p3" value="Roma"> Roma</label><br>
<label><input type="radio" name="p3" value="Barcelona"> Barcelona</label><br><br>
<p><strong>4.</strong> ¿Qué lema representa su misión educativa?</p>
<label><input type="radio" name="p4" value="Fe y razón"> Fe y razón</label><br>
<label><input type="radio" name="p4" value="Justicia y amor"> Justicia y amor</label><br>
<label><input type="radio" name="p4" value="Piedad y letras"> Piedad y letras</label><br><br>
<p><strong>5.</strong> ¿Qué día se celebra su festividad?</p>
<label><input type="radio" name="p5" value="25 de agosto"> 25 de agosto</label><br>
<label><input type="radio" name="p5" value="12 de octubre"> 12 de octubre</label><br>
<label><input type="radio" name="p5" value="15 de mayo"> 15 de mayo</label><br><br>
<button type="submit">Enviar respuestas</button>
</form>
<div id="resultado"></div>
</div>
</div>
<script>
// SCRIPT básico para abrir/cerrar el MODAL
const modal = document.getElementById("modalTrivia");
const btnAbrir = document.getElementById("abrirTrivia");
const btnCerrar = document.querySelector(".cerrar");
btnAbrir.onclick = () => { modal.style.display = "block"; };
btnCerrar.onclick = () => { modal.style.display = "none"; };
window.onclick = (e) => { 
if (e.target === modal) {
 modal.style.display = "none"; 
}
};
// 3. Capturar la información del formulario
document.getElementById("formTrivia").addEventListener("submit", function(e) {
    e.preventDefault(); // Evita la recarga de la página
    // Respuestas correctas (importante: valores deben coincidir exactamente con el atributo 'value' del HTML)
 const respuestasCorrectas = {
 p1: "Peralta de la Sal",
 p2: "1556",
 p3: "Roma",
 p4: "Piedad y letras",
p5: "25 de agosto"
    };
let puntaje = 0;
let salida = "";
const preguntas = ["p1", "p2", "p3", "p4", "p5"];
    // Iterar sobre cada pregunta
preguntas.forEach((nombre, indice) => {
const numeroPregunta = indice + 1;
     // document.querySelector('input[name="pX"]:checked'): devuelve la opción marcada
const r = document.querySelector(`input[name="${nombre}"]:checked`); 
const respuestaCorrecta = respuestasCorrectas[nombre];
if (r && r.value === respuestaCorrecta) {
 puntaje++;
 salida += `<p class="correcta">${numeroPregunta}. ✅ Correcta</p>`;
        } else {
            // Buscamos el texto de la respuesta correcta para la retroalimentación
const textoCorrecto = document.querySelector(`input[name="${nombre}"][value="${respuestaCorrecta}"]`).parentNode.textContent.trim();
            salida += `<p class="incorrecta">${numeroPregunta}. ❌ Incorrecta. Respuesta correcta: ${textoCorrecto}</p>`;
        }
    });
    // 5. Retroalimentación: mostrar un mensaje final dependiendo de la puntuación
    salida += `<h4>Puntaje final: ${puntaje} de 5</h4>`;
    if (puntaje === 5) {
        salida += "<p class='correcta'> ¡Excelente trabajo!</p>"; 
    } else if (puntaje >= 3) {
        salida += "<p class='correcta'> Muy bien, conoces bastante sobre Calasanz.</p>"; 
    } else {
        salida += "<p class='incorrecta'> Puedes repasar la página para aprender más.</p>";
    }
    // Mostramos el resultado dentro del modal
document.getElementById("resultado").innerHTML = salida;
});
</script> 
</body>
</html>